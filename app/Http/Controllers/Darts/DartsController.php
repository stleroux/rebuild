<?php

namespace App\Http\Controllers\Darts;

use Illuminate\Http\Request;
use App\Http\Controllers\Controller;
use Auth;
use DB;
use Session;
use App\Models\User;
use App\Models\Darts\Game;
use App\Models\Darts\Score;
use App\Models\Darts\Player;

class DartsController extends Controller
{
##################################################################################################################
#  ██████╗ ██████╗ ███╗   ██╗███████╗████████╗██████╗ ██╗   ██╗ ██████╗████████╗
# ██╔════╝██╔═══██╗████╗  ██║██╔════╝╚══██╔══╝██╔══██╗██║   ██║██╔════╝╚══██╔══╝
# ██║     ██║   ██║██╔██╗ ██║███████╗   ██║   ██████╔╝██║   ██║██║        ██║   
# ██║     ██║   ██║██║╚██╗██║╚════██║   ██║   ██╔══██╗██║   ██║██║        ██║   
# ╚██████╗╚██████╔╝██║ ╚████║███████║   ██║   ██║  ██║╚██████╔╝╚██████╗   ██║   
#  ╚═════╝ ╚═════╝ ╚═╝  ╚═══╝╚══════╝   ╚═╝   ╚═╝  ╚═╝ ╚═════╝  ╚═════╝   ╚═╝   
##################################################################################################################
   public function __construct()
   {
      $this->middleware('auth');
      $this->enablePermissions = true;
   }


##################################################################################################################
# ██╗███╗   ██╗██████╗ ███████╗██╗  ██╗
# ██║████╗  ██║██╔══██╗██╔════╝╚██╗██╔╝
# ██║██╔██╗ ██║██║  ██║█████╗   ╚███╔╝ 
# ██║██║╚██╗██║██║  ██║██╔══╝   ██╔██╗ 
# ██║██║ ╚████║██████╔╝███████╗██╔╝ ██╗
# ╚═╝╚═╝  ╚═══╝╚═════╝ ╚══════╝╚═╝  ╚═╝
// Display a list of resources
##################################################################################################################
	public function index()
	{
		// Check if user has required permission
      if($this->enablePermissions) {
         if(!checkPerm('dart_browse')) { abort(401, 'Unauthorized Access'); }
      }

		$players = User::where('id','!=',1)->whereNotNull('first_name')->whereNotNull('last_name')->orderby('last_name', 'asc')->get();

		return view('darts.index', compact('players'));
	}


##################################################################################################################
#  ██████╗  █████╗ ███╗   ███╗███████╗███████╗    ██████╗  ██████╗  █████╗ ██████╗ ██████╗ 
# ██╔════╝ ██╔══██╗████╗ ████║██╔════╝██╔════╝    ██╔══██╗██╔═══██╗██╔══██╗██╔══██╗██╔══██╗
# ██║  ███╗███████║██╔████╔██║█████╗  ███████╗    ██████╔╝██║   ██║███████║██████╔╝██║  ██║
# ██║   ██║██╔══██║██║╚██╔╝██║██╔══╝  ╚════██║    ██╔══██╗██║   ██║██╔══██║██╔══██╗██║  ██║
# ╚██████╔╝██║  ██║██║ ╚═╝ ██║███████╗███████║    ██████╔╝╚██████╔╝██║  ██║██║  ██║██████╔╝
#  ╚═════╝ ╚═╝  ╚═╝╚═╝     ╚═╝╚══════╝╚══════╝    ╚═════╝  ╚═════╝ ╚═╝  ╚═╝╚═╝  ╚═╝╚═════╝ 
// Display the specified resource
##################################################################################################################
	public function board()
	{
		// Check if user has required permission
      if($this->enablePermissions) {
         if(!checkPerm('dart_browse')) { abort(401, 'Unauthorized Access'); }
      }
      
		$games = Game::orderby('id','desc')->paginate(15);
		return view('darts.games.board', compact('games'));
	}


}
