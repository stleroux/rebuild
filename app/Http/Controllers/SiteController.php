<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
//use App\Category;
//use App\Comment;
//use App\Module;
//use App\Permission;
//use App\User;
//use Auth;
use Session;

use Modules\Posts\Entities\Post;
// use Modules\Recipes\Entities\Recipe;

class SiteController extends Controller
{

##################################################################################################################
#  ██████╗ ██████╗ ███╗   ██╗███████╗████████╗██████╗ ██╗   ██╗ ██████╗████████╗
# ██╔════╝██╔═══██╗████╗  ██║██╔════╝╚══██╔══╝██╔══██╗██║   ██║██╔════╝╚══██╔══╝
# ██║     ██║   ██║██╔██╗ ██║███████╗   ██║   ██████╔╝██║   ██║██║        ██║   
# ██║     ██║   ██║██║╚██╗██║╚════██║   ██║   ██╔══██╗██║   ██║██║        ██║   
# ╚██████╗╚██████╔╝██║ ╚████║███████║   ██║   ██║  ██║╚██████╔╝╚██████╗   ██║   
#  ╚═════╝ ╚═════╝ ╚═╝  ╚═══╝╚══════╝   ╚═╝   ╚═╝  ╚═╝ ╚═════╝  ╚═════╝   ╚═╝   
##################################################################################################################
	public function __construct()
	{
		// $this->middleware('auth');
		Session::forget('byCatName');
		Session::forget('byCatLetter');
	}


##################################################################################################################
# ██╗  ██╗ ██████╗ ███╗   ███╗███████╗██████╗  █████╗  ██████╗ ███████╗
# ██║  ██║██╔═══██╗████╗ ████║██╔════╝██╔══██╗██╔══██╗██╔════╝ ██╔════╝
# ███████║██║   ██║██╔████╔██║█████╗  ██████╔╝███████║██║  ███╗█████╗  
# ██╔══██║██║   ██║██║╚██╔╝██║██╔══╝  ██╔═══╝ ██╔══██║██║   ██║██╔══╝  
# ██║  ██║╚██████╔╝██║ ╚═╝ ██║███████╗██║     ██║  ██║╚██████╔╝███████╗
# ╚═╝  ╚═╝ ╚═════╝ ╚═╝     ╚═╝╚══════╝╚═╝     ╚═╝  ╚═╝ ╚═════╝ ╚══════╝
##################################################################################################################
	public function homepage()
	{
		// Set the variable so we can use a button in other pages to come back to this page
      Session::put('pageName', 'home');

		$posts = Post::published()->with('user')->orderBy('id','desc')->take(setting('homepage_blog_count'))->get();

		// $popularArticle = Article::published()->get()->sortByDesc('views')->take(1);
		$popularPosts = Post::published()->get()->sortByDesc('views')->take(setting('homepage_favorite_post_count'));
		// dd($popularPosts);
		// $popularRecipes = Recipe::published()->public()->get()->sortBy('title')->sortByDesc('views')->take(setting('homepage_favorite_recipe_count'));
		// dd($popularRecipes);
		// $popularWoodProject = WoodProject::get()->sortByDesc('views')->take(1);

		// return view('homepage', compact('posts','popularPosts','popularRecipes'));
		return view('homepage', compact('posts','popularPosts'));
	}


##################################################################################################################
#  █████╗ ██████╗  ██████╗ ██╗   ██╗████████╗
# ██╔══██╗██╔══██╗██╔═══██╗██║   ██║╚══██╔══╝
# ███████║██████╔╝██║   ██║██║   ██║   ██║   
# ██╔══██║██╔══██╗██║   ██║██║   ██║   ██║   
# ██║  ██║██████╔╝╚██████╔╝╚██████╔╝   ██║   
# ╚═╝  ╚═╝╚═════╝  ╚═════╝  ╚═════╝    ╚═╝  
##################################################################################################################
	public function about()
	{
		return view('about');
	}


##################################################################################################################
#  ██████╗ ██████╗ ███╗   ██╗████████╗ █████╗  ██████╗████████╗
# ██╔════╝██╔═══██╗████╗  ██║╚══██╔══╝██╔══██╗██╔════╝╚══██╔══╝
# ██║     ██║   ██║██╔██╗ ██║   ██║   ███████║██║        ██║   
# ██║     ██║   ██║██║╚██╗██║   ██║   ██╔══██║██║        ██║   
# ╚██████╗╚██████╔╝██║ ╚████║   ██║   ██║  ██║╚██████╗   ██║   
#  ╚═════╝ ╚═════╝ ╚═╝  ╚═══╝   ╚═╝   ╚═╝  ╚═╝ ╚═════╝   ╚═╝   
##################################################################################################################
	// public function contact()
	// {
	// 	return view('contact');
	// }


##################################################################################################################
# ████████╗███████╗██████╗ ███╗   ███╗███████╗
# ╚══██╔══╝██╔════╝██╔══██╗████╗ ████║██╔════╝
#    ██║   █████╗  ██████╔╝██╔████╔██║███████╗
#    ██║   ██╔══╝  ██╔══██╗██║╚██╔╝██║╚════██║
#    ██║   ███████╗██║  ██║██║ ╚═╝ ██║███████║
#    ╚═╝   ╚══════╝╚═╝  ╚═╝╚═╝     ╚═╝╚══════╝
##################################################################################################################
	public function terms()
	{
		return view('termsAndConditions');
	}


##################################################################################################################
# ██████╗ ██████╗ ██╗██╗   ██╗ █████╗  ██████╗██╗   ██╗
# ██╔══██╗██╔══██╗██║██║   ██║██╔══██╗██╔════╝╚██╗ ██╔╝
# ██████╔╝██████╔╝██║██║   ██║███████║██║      ╚████╔╝ 
# ██╔═══╝ ██╔══██╗██║╚██╗ ██╔╝██╔══██║██║       ╚██╔╝  
# ██║     ██║  ██║██║ ╚████╔╝ ██║  ██║╚██████╗   ██║   
# ╚═╝     ╚═╝  ╚═╝╚═╝  ╚═══╝  ╚═╝  ╚═╝ ╚═════╝   ╚═╝   
##################################################################################################################
	public function privacy()
	{
		return view('privacyPolicy');
	}



}
